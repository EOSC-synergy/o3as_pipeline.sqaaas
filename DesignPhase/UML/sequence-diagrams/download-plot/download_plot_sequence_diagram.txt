@startuml
skinparam style strictuml

actor User

User -> NavBar: onClick()
activate NavBar
NavBar -> NavBar: openPopUp()
activate NavBar
NavBar -> DownloadPopUp: <<create>>
activate DownloadPopUp
note over DownloadPopUp: Wait for the User \n to select a item in \n the list box
DownloadPopUp -> ListBox: getSelectedValue()
activate ListBox
DownloadPopUp <-- ListBox: selectedFormat
deactivate ListBox
DownloadPopUp -> DownloadHandler: downloadPlot(selectedFormat)
activate DownloadHandler
alt selectedFormat == "PNG"
	
	DownloadHandler -> Graph: generatePNG()
	activate Graph
	DownloadHandler <-- Graph: graphFile
	deactivate Graph

else selectedFormat == "SVG"

	DownloadHandler -> Graph: "generateSVG()"
	activate Graph
	DownloadHandler <-- Graph: graphFile
	deactivate Graph

else selectedFormat == "PDF"

	DownloadHandler -> Graph: generatePDF()
	activate Graph
	DownloadHandler <-- Graph: graphFile
	deactivate Graph

end
DownloadHandler -> DownloadHandler: startDownload(graphFile)
activate DownloadHandler
DownloadHandler --> DownloadHandler
deactivate DownloadHandler
DownloadPopUp <-- DownloadHandler
deactivate DownloadHandler
NavBar <-- DownloadPopUp
deactivate DownloadPopUp
destroy DownloadPopUp
NavBar --> NavBar
deactivate NavBar

User <-- NavBar
deactivate NavBar

@enduml